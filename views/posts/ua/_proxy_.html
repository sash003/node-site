–î–ª—è –ø–æ—á–∞—Ç–∫—É –∑–∞—Ö–æ–¥–∏–º–æ –≤ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞ —á–µ—Ä–µ–∑ SSH:
<pre><code class="language-javascript">
ssh root@176.214.14.203 // ip —Å–µ—Ä–≤–µ—Ä–∞
–í–≤–æ–¥–∏–º–æ –ø–∞—Ä–æ–ª—å —ñ –ø–æ—Ç—Ä–∞–ø–ª—è—î–º–æ –≤ –û–° —Å–µ—Ä–≤–µ—Ä–∞
</code></pre>
–©–æ –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–∞–ª—ñ. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π Node.js —ñ, —è–∫—â–æ –Ω—ñ, —Ç–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏.
<pre><code class="language-javascript">
node -v // —è–∫—â–æ –ø–æ–∫–∞–∂–µ, –∑–Ω–∞—á–∏—Ç—å –Ω–æ–¥–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞. –Ø–∫—â–æ –Ω—ñ
//–î–æ–¥–∞—î–º–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –¥–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 20.x):
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
//–í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ Node.js (npm —Å—Ç–∞–≤–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ):
sudo apt install -y nodejs
//–ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
node -v
npm -v
//–ü–æ—Ç—Ä—ñ–±–Ω–æ, —â–æ–± –∑'—è–≤–∏–ª–∏—Å—å –≤–µ—Ä—Å—ñ—ó Node.js —ñ npm
//–í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ PM2 –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å–∞–º–∏ –Ω–æ–¥–∏
sudo npm install -g pm2
</code></pre>
–¢–µ–ø–µ—Ä –∑–∞–ø—É—Å—Ç–∏–º–æ –Ω–∞—à–µ –Ω–æ–¥–µ-–∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è. –£ –º–µ–Ω–µ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥—É - app.js
–î–ª—è –±–æ—î–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ –∑–∞–ø—É—Å–∫–∞—î–º–æ —á–µ—Ä–µ–∑ "node app.js" –Ω–∞–ø—Ä—è–º—É, —ñ–Ω–∞–∫—à–µ –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ SSH –ø—Ä–æ—Ü–µ—Å –∑—É–ø–∏–Ω–∏—Ç—å—Å—è. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ pm2:
<pre><code class="language-javascript">
pm2 start app.js --name "nodesite"
pm2 save
pm2 startup //–¶–µ –¥–æ–∑–≤–æ–ª–∏—Ç—å –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –ø–æ—Å—Ç—ñ–π–Ω–æ.
</code></pre>
–ü–æ–≤–∏–Ω–Ω–∞ –∑‚Äô—è–≤–∏—Ç–∏—Å—è –∫—Ä–∞—Å–∏–≤–∞ —Ç–∞–±–ª–∏—á–∫–∞, –¥–µ –∑–µ–ª–µ–Ω–∏–º –≥–æ—Ä—ñ—Ç–∏–º–µ online)

–ó–∞–ø–∏—Ç–∏ –Ω–∞ –¥–æ–º–µ–Ω –∞–±–æ –ø—ñ–¥–¥–æ–º–µ–Ω –π–¥—É—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ –Ω–∞ nginx 80-–π –ø–æ—Ä—Ç. –ü–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç–∏ —ó—Ö –Ω–∞ Node.js. –°–ø–æ—á–∞—Ç–∫—É –ø—Ä–æ–±—É–≤–∞–≤ —á–µ—Ä–µ–∑ —Ñ–∞–π–ª–∏ –∫–æ–Ω—Ñ—ñ–≥—ñ–≤ –¥–æ–º–µ–Ω—É, –Ω–µ –≤–∏–π—à–ª–æ, –¥–æ–≤–µ–ª–æ—Å—è —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –≥–ª–æ–±–∞–ª—å–Ω–∏–π –∫–æ–Ω—Ñ—ñ–≥ nginx. –í—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É –ø—Ä–æ–≥—Ä–∞–º—É nano. –í Ubuntu –≥–ª–æ–±–∞–ª—å–Ω–∏–π –∫–æ–Ω—Ñ—ñ–≥ Nginx –∑–∞–∑–≤–∏—á–∞–π –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è —Ç—É—Ç: /etc/nginx/nginx.conf. –©–æ–± –≤—ñ–¥–∫—Ä–∏—Ç–∏ —ñ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏:
<pre><code class="language-javascript">
sudo nano /etc/nginx/nginx.conf
–∞–±–æ —á–µ—Ä–µ–∑ vim:
sudo vim /etc/nginx/nginx.conf
</code></pre>
–û—Å—å —â–æ —Ç–∞–º –±—É–ª–æ –¥–ª—è –º–æ–≥–æ –ø—ñ–¥–¥–æ–º–µ–Ω—É:
<pre><code class="language-javascript">
server {
  server_name node.waytohome.in.net www.node.waytohome.in.net;
  listen 176.114.14.200;
  disable_symlinks if_not_owner from=$root_path;
  set $root_path /var/www/sash30038383/data/www/node.waytohome.in.net;
  location ~* ^.+\.(jpg|jpeg|gif|png|svg|js|css|mp3|ogg|mpe?g|avi|zip|gz|bz2?|rar|swf)$ {
    root $root_path;
    access_log /var/www/nginx-logs/sash30038383 isp;
    access_log /var/www/httpd-logs/node.waytohome.in.net.access.log ;
    error_page 404 = @fallback;
  }
  location / {
    proxy_pass http://176.114.14.200:81;
    proxy_redirect http://176.114.14.200:81/ /;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header X-Real-IP $remote_addr;
  }
  location ~* ^/(webstat|awstats|webmail|myadmin|pgadmin)/ { //—ñ –¥–∞–ª—ñ –±–ª–æ–∫–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –¥–ª—è server
  }
}
</code></pre>
–ó–∞–ºi–Ω–∏–≤ –≤–µ—Å—å —Ü–µ–π –±–ª–æ–∫ –Ω–∞
<pre><code class="language-javascript">
server {
    listen 176.114.14.200:80;
    server_name node.waytohome.in.net www.node.waytohome.in.net;

    root /var/www/sash30038383/data/www/node.waytohome.in.net/public;
    index index.html index.htm;

    location / {
        proxy_pass http://127.0.0.1:4320;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }

    include /usr/local/ispmgr/etc/nginx.inc;
}
</code></pre>
–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ nginx, –Ω–æ–¥–∞ –≤ –Ω–∞—Å –∑–∞–ø—É—â–µ–Ω–∞ —ñ —Å–ª—É—Ö–∞—î –≤–∫–∞–∑–∞–Ω–∏–π –ø–æ—Ä—Ç (—É –º–µ–Ω–µ 4320)
<pre><code class="language-javascript">
sudo nginx -t # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
sudo systemctl reload nginx //–∞–±–æ
sudo systemctl restart nginx
</code></pre>
–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ —É –º–µ–Ω–µ –≤—Å–µ –≤—ñ–¥–∫—Ä–∏–ª–∞—Å—å, –¥–∞–π –ë–æ–∂–µ, —â–æ–± —ñ —É –≤–∞—Å —Å–ø—Ä–∞—Ü—é–≤–∞–ª–æ üòäü§ù

–¢–µ–ø–µ—Ä –∑—Ä–æ–±–∏–º–æ –±–æ—î–≤–∏–π –∫–æ–Ω—Ñ—ñ–≥ PM2, —è–∫–∏–π –º–æ–∂–Ω–∞ –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ö–æ—á –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º—É, —Ö–æ—á –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ. –°—Ç–≤–æ—Ä—é—î–º–æ —Ñ–∞–π–ª ecosystem.config.js —É –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É:
<pre><code class="language-javascript">
module.exports = {
  apps: [
    {
      name: "myapp",              // —ñ–º'—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É (–±—É–¥—å-—è–∫–µ)
      script: "app.js",           // —Ç–æ—á–∫–∞ –≤—Ö–æ–¥—É (–∞–±–æ server.js)
      instances: 1,               // –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—ñ–≤ (1 = –∑–≤–∏—á–∞–π–Ω–∏–π —Ä–µ–∂–∏–º)
      autorestart: true,          // –∞–≤—Ç–æ-—Ä–µ–±—É—Ç –ø—Ä–∏ –ø–∞–¥—ñ–Ω–Ω—ñ
      watch: true,               // —Å–ª—ñ–¥–∫—É–≤–∞—Ç–∏ –∑–∞ —Ñ–∞–π–ª–∞–º–∏ (–∫—Ä–∞—â–µ false –Ω–∞ –ø—Ä–æ–¥—ñ)
      watch_delay: 1000, // –∑–∞—Ç—Ä–∏–º–∫–∞ —â–æ–± –Ω–µ –¥–µ—Ä–≥–∞–≤—Å—è –ø–æ—Å—Ç—ñ–π–Ω–æ
      max_memory_restart: "300M", // –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —è–∫—â–æ >300–ú–ë –ø–∞–º'—è—Ç—ñ
      env: {
      NODE_ENV: "development",  // –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è –¥–ª—è dev
    },
    env_production: {
      NODE_ENV: "production"    // –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è –¥–ª—è prod
    },
      error_file: "./logs/err.log",  // –ø–æ–º–∏–ª–∫–∏
      out_file: "./logs/out.log",    // –∑–≤–∏—á–∞–π–Ω—ñ –ª–æ–≥–∏
      log_date_format: "YYYY-MM-DD HH:mm:ss"
    }
  ]
};
</code></pre>
–ö–æ–º–∞–Ω–¥–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è:

pm2 start ecosystem.config.js --env production --watch  # –∑–∞–ø—É—Å–∫

üî∏ –Ø–∫—â–æ —Ä—É–≥–∞—î—Ç—å—Å—è ‚Äî –∑–∞–ø—É—Å–∫–∞—Ç–∏ —á–µ—Ä–µ–∑ npx. –¢–æ–¥—ñ PowerShell –Ω–µ —á—ñ–ø–∞—î .ps1:

npx pm2 start ecosystem.config.js --env production --watch
npx pm2 restart myapp  # –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
npx pm2 stop myapp     # —Å—Ç–æ–ø
npx pm2 delete myapp   # –≤–∏–¥–∞–ª–∏—Ç–∏
npx pm2 logs myapp     # –ø–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
npx pm2 monit          # –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤ –∫–æ–Ω—Å–æ–ª—ñ

–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É (—â–æ–± –ø—ñ—Å–ª—è —Ä–µ–±—É—Ç—É —Å–µ—Ä–≤–µ—Ä–∞ –≤—Å–µ —Å—Ç–∞—Ä—Ç—É–≤–∞–ª–æ)
pm2 save
pm2 startup

üì¶ –í –ø—ñ–¥—Å—É–º–∫—É –æ—Ç—Ä–∏–º–∞—î–º–æ:
–ü–æ—Å—Ç—ñ–π–Ω–∞ —Ä–æ–±–æ—Ç–∞ Node.js
–ê–≤—Ç–æ-–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–±–æ—è—Ö –∞–±–æ –≤–∏—Ç–æ–∫—É –ø–∞–º'—è—Ç—ñ
–ö—Ä–∞—Å–∏–≤—ñ –ª–æ–≥–∏ –≤ ./logs/
–ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ª–µ–≥–∫–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É