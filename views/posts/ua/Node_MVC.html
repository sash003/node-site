<h2>–©–æ —Ç–∞–∫–µ MVC</h2>
MVC (Model-View-Controller) ‚Äì —Ü–µ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–∏–π –ø–∞—Ç–µ—Ä–Ω, —è–∫–∏–π –ø–æ–¥—ñ–ª—è—î –ø—Ä–æ–µ–∫—Ç –Ω–∞ —Ç—Ä–∏ —à–∞—Ä–∏:
Model (–ú–æ–¥–µ–ª—å) ‚Äì –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ —Ä–æ–±–æ—Ç—É –∑ –¥–∞–Ω–∏–º–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –±–∞–∑–∞ MySQL).
View (–ü–æ–¥–∞–Ω–Ω—è) - —Ç–µ, —â–æ –±–∞—á–∏—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á (HTML, CSS, JS).
Controller (–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä) - –ø–æ—Å–µ—Ä–µ–¥–Ω–∏–∫ –º—ñ–∂ –º–æ–¥–µ–ª–ª—é —ñ –≤–∏–¥–æ–º, –æ–±—Ä–æ–±–ª—è—î –∑–∞–ø–∏—Ç–∏, –≤–∏–∫–ª–∏–∫–∞—î –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –º–æ–¥–µ–ª—ñ —ñ –ø–µ—Ä–µ–¥–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É View.

–¢–∞–∫–∏–π –ø—ñ–¥—Ö—ñ–¥ —Ä–æ–±–∏—Ç—å –∫–æ–¥:
- –ë—ñ–ª—å—à–µ —á–∏—Ç–∞–Ω–∏–º,
- –ü—Ä–æ—Å—Ç—ñ—à–µ –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏,
- –ì–Ω—É—á–∫—ñ—à–∞ –¥–ª—è —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è.

–ë–∞–∑–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É
<pre><code class="language-javascript">
myapp/
‚îÇ
‚îú‚îÄ‚îÄ app.js # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É (Express —Å–µ—Ä–≤–µ—Ä)
‚îú‚îÄ‚îÄ routes/ # –ú–∞—Ä—à—Ä—É—Ç–∏
‚îÇ ‚îî‚îÄ‚îÄ index.js
‚îú‚îÄ‚îÄ controllers/ # –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏
‚îÇ ‚îî‚îÄ‚îÄ postController.js
‚îú‚îÄ‚îÄ models/ # –ú–æ–¥–µ–ª—ñ
‚îÇ ‚îî‚îÄ‚îÄ postModel.js
‚îú‚îÄ‚îÄ views/ # –ü–æ–¥–∞–Ω–Ω—è (—à–∞–±–ª–æ–Ω–∏ –∞–±–æ —Å—Ç–∞—Ç–∏–∫–∞)
‚îÇ ‚îî‚îÄ‚îÄ posts.ejs
‚îî‚îÄ‚îÄ public/
‚îÇ ‚îî‚îÄ‚îÄ img
‚îÇ ‚îî‚îÄ‚îÄ js
‚îÇ ‚îî‚îÄ‚îÄ css
‚îî‚îÄ‚îÄ package.json

</code></pre>

<h3>–ö—Ä–æ–∫ 1. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞</h3>
app.js
<pre><code class="language-javascript">
const express = require('express');
const app = express();
const routes = require('./routes/index');

app.set('view engine', 'ejs'); // –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ ejs/pug/handlebars
app.use(express.urlencoded({ extended: true }));
app.use(express.json());

// –ü—ñ–¥–∫–ª—é—á–∞—î–º–æ –º–∞—Ä—à—Ä—É—Ç–∏
app.use('/', routes);

const PORT = 3000;
app.listen(PORT, () => console.log(`Server started on http://localhost:${PORT}`));
</code></pre>
<h3>–ö—Ä–æ–∫ 2. –ú–∞—Ä—à—Ä—É—Ç–∏</h3>
routes/index.js
<pre><code class="language-javascript">
const express = require('express');
const router = express.Router();
const postController = require('../controllers/postController');

// –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç—ñ–≤
router.get('/posts', postController.list);

// –æ–¥–Ω–∞ –ø–æ—Å—Ç
router.get('/posts/:id', postController.details);

// –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –ø–æ—Å—Ç (–ø—Ä–∏–∫–ª–∞–¥ POST –∑–∞–ø–∏—Ç—É)
router.post('/posts', postController.create);

module.exports = router;
</code></pre>
<h3>–ö—Ä–æ–∫ 3. –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏</h3>
controllers/postController.js
<pre><code class="language-javascript">
const Post = require('../models/postModel');

exports.list = async (req, res) => {
  const posts = await Post.getAll();
  res.render('posts', {posts});
};

  exports.details = async (req, res) => {
  const post = await Post.getById(req.params.id);
  if (!post) return res.status(404).send('Not found');
  res.json(post);
};

exports.create = async (req, res) => {
  const {title, content} = req.body;
  await Post.create(title, content);
  res.redirect('/posts');
};
</code></pre>
<h3>–ö—Ä–æ–∫ 4. –ú–æ–¥–µ–ª—ñ</h3>
models/postModel.js
<pre><code class="language-javascript">
const mysql = require('mysql2/promise');

const pool = mysql.createPool({
  host: 'localhost',
  user: 'root',
  database: 'mvc_test'
});

exports.getAll = async() => {
  const [rows] = await pool.query('SELECT * FROM posts ORDER BY created_at DESC');
  return rows;
};

exports.getById = async(id) => {
  const [rows] = await pool.query('SELECT * FROM posts WHERE id = ?', [id]);
  return rows [0];
};

exports.create = async (title, content) => {
  await pool.query('INSERT INTO posts (title, content, created_at) VALUES (?, ?, UNIX_TIMESTAMP())', [title, content]);
};
</code></pre>
<h3>–ö—Ä–æ–∫ 5. –ü–æ–¥–∞–Ω–Ω—è</h3>
views/posts.ejs
<pre><code class="language-html">
<!DOCTYPE html>
  <html lang="ru">
    <head>
    <meta charset="UTF-8">
      <title>–ü–æ—Å—Ç–∏</title>
    </head>
    <body>
      <h1>–°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç—ñ–≤</h1>
      <ul>
        <% posts.forEach(p => {%>
          <li><b><%= p.title %></b> ‚Äî <%= p.content %></li>
        <%}) %>
      </ul>

    <form action="/posts" method="POST">
      <input type="text" name="title" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫">
      <textarea name="content" placeholder="–¢–µ–∫—Å—Ç"></textarea>
      <button type="submit">–î–æ–¥–∞—Ç–∏</button>
    </form>
    </body>
  </html>
</code></pre>
<h3>–ü—ñ–¥—Å—É–º–æ–∫</h3>
–ú–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ –∫–ª–∞—Å–∏—á–Ω—É MVC-–¥–æ–¥–∞—Ç–æ–∫ –Ω–∞ Node.js:
Model (postModel) –ø—Ä–∞—Ü—é—î —ñ–∑ –ë–î.
Controller (postController) –æ—Ç—Ä–∏–º—É—î –∑–∞–ø–∏—Ç–∏ —Ç–∞ –≤–∏–∫–ª–∏–∫–∞—î –º–æ–¥–µ–ª—å.
View (EJS) –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –¥–∞–Ω—ñ.
Router –∫–µ—Ä—É—î –º–∞—Ä—à—Ä—É—Ç–∞–º–∏.
app.js –ø–æ–≤'—è–∑—É—î –≤—Å–µ —Ä–∞–∑–æ–º.

üëâ –ù–∞ —Ç–∞–∫–æ–º—É –ø—ñ–¥—Ö–æ–¥—ñ –ª–µ–≥–∫–æ –±—É–¥—É–≤–∞—Ç–∏ –Ω–æ–≤–∏–Ω–Ω–∏–∫–∏, –±–ª–æ–≥–∏, –º–∞–≥–∞–∑–∏–Ω–∏, —á–∞—Ç–∏ - –±—É–¥—å-—è–∫–∏–π CRUD-–¥–æ–¥–∞—Ç–æ–∫.